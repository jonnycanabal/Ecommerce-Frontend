{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Producto } from 'src/app/models/producto';\nimport Swal from 'sweetalert2';\n//import { HttpClient, HttpHeaders } from '@angular/common/http';\nexport let ProductoFormComponent = class ProductoFormComponent {\n  //importar el service en el contructor\n  //Clase u objeto de angular que se llama Router, se debe inyectar  para despues utilizarlo en el metodo por medio del navigate\n  // con el private route: ActivatedRoute obtiene el ID y en caso de que exista lo muestra en el formulario\n  constructor(service, router, route) {\n    this.service = service;\n    this.router = router;\n    this.route = route;\n    this.titulo = \"Ingresar Producto\";\n    this.producto = new Producto(); //atributo producto\n  }\n\n  ngOnInit() {\n    //como el paramMap es reactivo, toca usar el subscribe (no entiendi bien esta parte)\n    //con el signo + se convierte de number a String, seria un cast\n    this.route.paramMap.subscribe(params => {\n      const id = +params.get('id');\n      if (id) {\n        this.service.ver(id).subscribe(producto => {\n          this.producto = producto;\n        });\n      }\n    });\n  }\n  guardarProducto() {\n    if (this.fotoSeleccionada) {\n      // Si se seleccion贸 un archivo, decidir si editar o crear con foto\n      if (this.producto.id) {\n        this.editarConFoto();\n      } else {\n        this.crearConFoto();\n      }\n    } else {\n      // Si no se seleccion贸 un archivo, decidir si editar o crear sin foto\n      if (this.producto.id) {\n        this.editar();\n      } else {\n        this.crear();\n      }\n    }\n  }\n  crear() {\n    if (!this.producto.nombre || !this.producto.marca || !this.producto.precio) {\n      alert('Por favor, completar todos los campos.');\n      return;\n    }\n    this.service.crear(this.producto).subscribe(producto => {\n      console.log(producto);\n      //el Swal es un fremawork para cambiar los mensajes de alertas. se usa el fire para disparar este mensaje\n      //Swal.fire('Nuevo', `Producto ${producto.nombre} creado con exito`, 'success');\n      this.router.navigate(['/productos/ver']);\n    }, err => {\n      if (err.status == 400) {\n        this.error = err.error;\n        console.log(this.error);\n      }\n    });\n  }\n  editar() {\n    this.service.editar(this.producto).subscribe(producto => {\n      console.log(producto);\n      Swal.fire('Modificar', `Producto ${producto.nombre} actualizado con exito`, 'success');\n      this.router.navigate(['/productos/ver']);\n    }, err => {\n      if (err.status == 400) {\n        this.error = err.error;\n        console.log(this.error);\n      }\n    });\n  }\n  /**----------------------------------------------------------------------------------------------- */\n  seleccionarFoto(event) {\n    this.fotoSeleccionada = event.target.files[0];\n    console.info(this.fotoSeleccionada);\n    if (this.fotoSeleccionada.type.indexOf('image') < 0) {\n      this.fotoSeleccionada = null;\n      Swal.fire('Error al seleccionar la foto', 'El archivo debe ser de tipo imagen', 'error');\n    }\n  }\n  //atraves del event se obtiene la imagen que es de tipo file, pero se puede asignar a un atributo del componente\n  //para que despues se puede enviar al servis(backend)\n  //despues de terminar estos pasos en el \"service\" se debe de crear un metodo para crear y editar con foto.\n  //aqui se debe hacer un swich dependiente de si se invoca el crear o editar con foto\n  crearConFoto() {\n    if (!this.fotoSeleccionada) {\n      this.crear();\n    } else {\n      this.service.crearConFoto(this.producto, this.fotoSeleccionada).subscribe(producto => {\n        console.log(producto);\n        //el Swal es un fremawork para cambiar los mensajes de alertas. se usa el fire para disparar este mensaje\n        Swal.fire('Nuevo', `Producto ${producto.nombre} creado con exito`, 'success');\n        this.router.navigate(['/productos/ver']);\n      }, err => {\n        if (err.status == 400) {\n          this.error = err.error;\n          console.log(this.error);\n        }\n      });\n    }\n  }\n  editarConFoto() {\n    if (!this.fotoSeleccionada) {\n      this.editar();\n    } else {\n      this.service.editarConFoto(this.producto, this.fotoSeleccionada).subscribe(producto => {\n        console.log(producto);\n        //el Swal es un fremawork para cambiar los mensajes de alertas. se usa el fire para disparar este mensaje\n        Swal.fire('Modificado', `Producto ${producto.nombre} actualizado con exito`, 'success');\n        this.router.navigate(['/productos/ver']);\n      }, err => {\n        if (err.status == 400) {\n          this.error = err.error;\n          console.log(this.error);\n        }\n      });\n    }\n  }\n};\nProductoFormComponent = __decorate([Component({\n  selector: 'app-producto-form',\n  templateUrl: './producto-form.component.html',\n  styleUrls: ['./producto-form.component.css']\n})], ProductoFormComponent);","map":{"version":3,"names":["Component","Producto","Swal","ProductoFormComponent","constructor","service","router","route","titulo","producto","ngOnInit","paramMap","subscribe","params","id","get","ver","guardarProducto","fotoSeleccionada","editarConFoto","crearConFoto","editar","crear","nombre","marca","precio","alert","console","log","navigate","err","status","error","fire","seleccionarFoto","event","target","files","info","type","indexOf","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\mao_9\\Documents\\Cursos\\Practica\\AplicativoEcommerce\\AplicativoEcommerce\\src\\app\\components\\productos\\producto-form.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Producto } from 'src/app/models/producto';\nimport { ProductoService } from 'src/app/services/producto.service';\nimport Swal from 'sweetalert2';\n\n//import { HttpClient, HttpHeaders } from '@angular/common/http';\n\n\n@Component({\n  selector: 'app-producto-form',\n  templateUrl: './producto-form.component.html',\n  styleUrls: ['./producto-form.component.css']\n})\n\nexport class ProductoFormComponent {\n\n  titulo = \"Ingresar Producto\";\n\n  producto: Producto = new Producto(); //atributo producto\n\n  error: any;\n\n  //atributo, despues de creado el atributo se le tiene que asignar un valor\n  private fotoSeleccionada: File;\n\n  //importar el service en el contructor\n  //Clase u objeto de angular que se llama Router, se debe inyectar  para despues utilizarlo en el metodo por medio del navigate\n  // con el private route: ActivatedRoute obtiene el ID y en caso de que exista lo muestra en el formulario\n  constructor(private service: ProductoService, \n    private router: Router, \n    private route: ActivatedRoute) {\n\n  }\n\n  ngOnInit() {\n    //como el paramMap es reactivo, toca usar el subscribe (no entiendi bien esta parte)\n    //con el signo + se convierte de number a String, seria un cast\n    this.route.paramMap.subscribe(params => {\n      const id: number = +params.get('id');\n      if (id) {\n        this.service.ver(id).subscribe(producto => {\n          this.producto = producto;\n        })\n      }\n    })\n  }\n\n  public guardarProducto(): void {\n    if (this.fotoSeleccionada) {\n        // Si se seleccion贸 un archivo, decidir si editar o crear con foto\n        if (this.producto.id) {\n            this.editarConFoto();\n        } else {\n            this.crearConFoto();\n        }\n    } else {\n        // Si no se seleccion贸 un archivo, decidir si editar o crear sin foto\n        if (this.producto.id) {\n            this.editar();\n        } else {\n            this.crear();\n        }\n    }\n}\n\n  public crear(): void {\n    if (!this.producto.nombre || !this.producto.marca || !this.producto.precio) {\n      alert('Por favor, completar todos los campos.')\n      return;\n    }\n    this.service.crear(this.producto).subscribe(producto => {\n      console.log(producto);\n      //el Swal es un fremawork para cambiar los mensajes de alertas. se usa el fire para disparar este mensaje\n      //Swal.fire('Nuevo', `Producto ${producto.nombre} creado con exito`, 'success');\n      this.router.navigate(['/productos/ver']);\n    }, err => {\n      if (err.status == 400) {\n        this.error = err.error;\n        console.log(this.error);\n      }\n    });\n  }\n\n  public editar(): void {\n    this.service.editar(this.producto).subscribe(producto => {\n      console.log(producto);\n      Swal.fire('Modificar', `Producto ${producto.nombre} actualizado con exito`, 'success');\n      this.router.navigate(['/productos/ver']);\n    }, err => {\n      if (err.status == 400) {\n        this.error = err.error;\n        console.log(this.error);\n      }\n    });\n  }\n\n  /**----------------------------------------------------------------------------------------------- */\n\n  public seleccionarFoto(event): void {\n    this.fotoSeleccionada = event.target.files[0];\n    console.info(this.fotoSeleccionada);\n\n    if(this.fotoSeleccionada.type.indexOf('image') < 0){\n      this.fotoSeleccionada = null;\n      Swal.fire('Error al seleccionar la foto', 'El archivo debe ser de tipo imagen', 'error');\n    }\n  }\n  //atraves del event se obtiene la imagen que es de tipo file, pero se puede asignar a un atributo del componente\n  //para que despues se puede enviar al servis(backend)\n\n  //despues de terminar estos pasos en el \"service\" se debe de crear un metodo para crear y editar con foto.\n\n\n  //aqui se debe hacer un swich dependiente de si se invoca el crear o editar con foto\n  \n  public crearConFoto(): void {\n    if (!this.fotoSeleccionada) {\n      this.crear();\n    } else {\n      this.service.crearConFoto(this.producto, this.fotoSeleccionada).subscribe(producto => {\n        console.log(producto);\n        //el Swal es un fremawork para cambiar los mensajes de alertas. se usa el fire para disparar este mensaje\n        Swal.fire('Nuevo', `Producto ${producto.nombre} creado con exito`, 'success');\n        this.router.navigate(['/productos/ver']);\n      }, err => {\n        if (err.status == 400) {\n          this.error = err.error;\n          console.log(this.error);\n        }\n      });\n    }\n  }\n\n  \n  public editarConFoto(): void {\n    if (!this.fotoSeleccionada) {\n      this.editar();\n    } else {\n      this.service.editarConFoto(this.producto, this.fotoSeleccionada).subscribe(producto => {\n        console.log(producto);\n        //el Swal es un fremawork para cambiar los mensajes de alertas. se usa el fire para disparar este mensaje\n        Swal.fire('Modificado', `Producto ${producto.nombre} actualizado con exito`, 'success');\n        this.router.navigate(['/productos/ver']);\n      }, err => {\n        if (err.status == 400) {\n          this.error = err.error;\n          console.log(this.error);\n        }\n      });\n    }\n  }\n  \n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}