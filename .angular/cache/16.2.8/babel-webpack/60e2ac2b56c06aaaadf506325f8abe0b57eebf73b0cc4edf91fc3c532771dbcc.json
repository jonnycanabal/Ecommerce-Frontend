{"ast":null,"code":"import { BASE_ENDPOINT } from 'src/app/config/app';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/tienda.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nfunction TiendasComponent_div_4_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 9);\n  }\n  if (rf & 2) {\n    const tienda_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", \"http://localhost:8080/tienda\" + \"/uploads/img/\" + tienda_r1.id + \"?fotoHashCode=\" + tienda_r1.fotoHashCode, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction TiendasComponent_div_4_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 9);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"src\", \"/assets/img/NoFoto.png\", i0.ɵɵsanitizeUrl);\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/tienda/editar/\", a1];\n};\nfunction TiendasComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4);\n    i0.ɵɵtemplate(2, TiendasComponent_div_4_img_2_Template, 1, 1, \"img\", 5);\n    i0.ɵɵtemplate(3, TiendasComponent_div_4_img_3_Template, 1, 1, \"img\", 5);\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelement(6, \"br\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"div\", 6)(10, \"button\", 7);\n    i0.ɵɵtext(11, \"Editar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function TiendasComponent_div_4_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const tienda_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.eliminar(tienda_r1));\n    });\n    i0.ɵɵtext(13, \"Eliminar\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const tienda_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", tienda_r1.fotoHashCode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !tienda_r1.fotoHashCode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", tienda_r1.nombre, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.formatearFecha(tienda_r1.createAt), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c0, tienda_r1.id));\n  }\n}\nexport class TiendasComponent {\n  constructor(service, datePipe) {\n    this.service = service;\n    this.datePipe = datePipe;\n    this.titulo = 'Listado de tiendas';\n    this.baseEndPoint = BASE_ENDPOINT;\n  }\n  ngOnInit() {\n    this.service.listar().subscribe(tiendas => this.tiendas = tiendas);\n  }\n  formatearFecha(createAt) {\n    // Verifica si createAt es un número válido\n    if (typeof createAt === 'number') {\n      const fecha = new Date(createAt);\n      return this.datePipe.transform(fecha, 'dd/MM/yyyy HH:mm:ss');\n    } else {\n      // En caso de que no sea un número válido, devuelve un mensaje de error o el valor original\n      return 'Fecha inválida';\n    }\n  }\n  eliminar(tienda) {\n    Swal.fire({\n      title: 'Cuidado: ',\n      text: `¿Seguro que deseas eliminar a ${tienda.nombre}?`,\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Si, Eliminar!'\n    }).then(result => {\n      if (result.value) {\n        this.service.eliminar(tienda.id).subscribe(() => {\n          // al usar filter nos crea una nueva lista sin el producto eliminado, se iguala a la lista producto\n          this.tiendas = this.tiendas.filter(p => p !== tienda);\n          Swal.fire('Eliminado', `Producto  ${tienda.nombre} eliminado con exito`, 'success');\n        });\n      }\n    });\n  }\n  static #_ = this.ɵfac = function TiendasComponent_Factory(t) {\n    return new (t || TiendasComponent)(i0.ɵɵdirectiveInject(i1.TiendaService), i0.ɵɵdirectiveInject(i2.DatePipe));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TiendasComponent,\n    selectors: [[\"app-tiendas\"]],\n    decls: 5,\n    vars: 1,\n    consts: [[1, \"container\", \"text-center\"], [1, \"row\", \"row-cols-2\", \"row-cols-lg-3\", \"g-2\", \"g-lg-3\"], [\"class\", \"col\", 4, \"ngFor\", \"ngForOf\"], [1, \"col\"], [1, \"p-3\"], [\"class\", \"img-thumbnail rounded\", \"style\", \"width: 200px; cursor: pointer;\", \"alt\", \"\", 3, \"src\", 4, \"ngIf\"], [1, \"m-3\", \"d-flex\", \"justify-content-center\"], [1, \"btn\", \"btn-secondary\", \"btn-sm\", \"m-1\", 3, \"routerLink\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", \"m-1\", 3, \"click\"], [\"alt\", \"\", 1, \"img-thumbnail\", \"rounded\", 2, \"width\", \"200px\", \"cursor\", \"pointer\", 3, \"src\"]],\n    template: function TiendasComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"tiendas works!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 0)(3, \"div\", 1);\n        i0.ɵɵtemplate(4, TiendasComponent_div_4_Template, 14, 7, \"div\", 2);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.tiendas);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.RouterLink],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["BASE_ENDPOINT","Swal","i0","ɵɵelement","ɵɵproperty","tienda_r1","id","fotoHashCode","ɵɵsanitizeUrl","ɵɵelementStart","ɵɵtemplate","TiendasComponent_div_4_img_2_Template","TiendasComponent_div_4_img_3_Template","ɵɵtext","ɵɵelementEnd","ɵɵlistener","TiendasComponent_div_4_Template_button_click_12_listener","restoredCtx","ɵɵrestoreView","_r6","$implicit","ctx_r5","ɵɵnextContext","ɵɵresetView","eliminar","ɵɵadvance","ɵɵtextInterpolate1","nombre","ctx_r0","formatearFecha","createAt","ɵɵpureFunction1","_c0","TiendasComponent","constructor","service","datePipe","titulo","baseEndPoint","ngOnInit","listar","subscribe","tiendas","fecha","Date","transform","tienda","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","value","filter","p","_","ɵɵdirectiveInject","i1","TiendaService","i2","DatePipe","_2","selectors","decls","vars","consts","template","TiendasComponent_Template","rf","ctx","TiendasComponent_div_4_Template"],"sources":["C:\\Users\\mao_9\\Documents\\Cursos\\Practica\\AplicativoEcommerce\\AplicativoEcommerce\\src\\app\\components\\tiendas\\tiendas.component.ts","C:\\Users\\mao_9\\Documents\\Cursos\\Practica\\AplicativoEcommerce\\AplicativoEcommerce\\src\\app\\components\\tiendas\\tiendas.component.html"],"sourcesContent":["import { DatePipe } from '@angular/common';\nimport { Component } from '@angular/core';\nimport { BASE_ENDPOINT } from 'src/app/config/app';\nimport { Tienda } from 'src/app/models/tienda';\nimport { TiendaService } from 'src/app/services/tienda.service';\nimport Swal from 'sweetalert2';\n\n@Component({\n  selector: 'app-tiendas',\n  templateUrl: './tiendas.component.html',\n  styleUrls: ['./tiendas.component.css']\n})\nexport class TiendasComponent {\n\n  titulo = 'Listado de tiendas'\n  tiendas: Tienda[];\n\n  baseEndPoint = BASE_ENDPOINT\n\n  constructor(private service: TiendaService, private datePipe: DatePipe){ }\n\n  ngOnInit(): void {\n    this.service.listar().subscribe(tiendas => this.tiendas = tiendas)\n  }\n\n  public formatearFecha(createAt: any): string {\n    // Verifica si createAt es un número válido\n    if (typeof createAt === 'number') {\n      const fecha = new Date(createAt);\n      return this.datePipe.transform(fecha, 'dd/MM/yyyy HH:mm:ss');\n    } else {\n      // En caso de que no sea un número válido, devuelve un mensaje de error o el valor original\n      return 'Fecha inválida';\n    }\n  }\n\n  public eliminar(tienda: Tienda): void {\n\n    Swal.fire({\n      title: 'Cuidado: ',\n      text: `¿Seguro que deseas eliminar a ${tienda.nombre}?`,\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Si, Eliminar!'\n    }).then((result) => {\n      if (result.value) {\n        this.service.eliminar(tienda.id).subscribe(() => {\n          // al usar filter nos crea una nueva lista sin el producto eliminado, se iguala a la lista producto\n          this.tiendas = this.tiendas.filter(p => p !== tienda);\n          Swal.fire('Eliminado', `Producto  ${tienda.nombre} eliminado con exito`, 'success');\n        });\n\n      }\n    })\n  }\n}\n","<p>tiendas works!</p>\n\n<div class=\"container text-center\">\n    <div class=\"row row-cols-2 row-cols-lg-3 g-2 g-lg-3\">\n        <div class=\"col\" *ngFor=\"let tienda of tiendas\">\n            <div class=\"p-3\">\n                <!--En el src se colocan entre corchetes para indicar que vamos a poblar, \n                            inyecto o hace run binding del atributo src de la imagen, que seria la forma de angular-->\n                <img *ngIf=\"tienda.fotoHashCode\"\n                    [src]=\"'http://localhost:8080/tienda' + '/uploads/img/' + tienda.id + '?fotoHashCode=' + tienda.fotoHashCode\"\n                    class=\"img-thumbnail rounded\"\n                    style=\"width: 200px; cursor: pointer;\" alt>\n\n                <img *ngIf=\"!tienda.fotoHashCode\"\n                    [src]=\"'/assets/img/NoFoto.png'\"\n                    class=\"img-thumbnail rounded\"\n                    style=\"width: 200px; cursor: pointer;\" alt><br>\n                {{tienda.nombre}}<br>\n                {{formatearFecha(tienda.createAt)}}<br>\n                <div class=\"m-3 d-flex justify-content-center\">\n                    <button class=\"btn btn-secondary btn-sm m-1\"\n                            [routerLink]=\"['/tienda/editar/', tienda.id]\">Editar</button>\n                    <!--En el boton eliminar tiene que haber un evento click que invoque un metodo que se encargue de eliminar-->\n                    <button class=\"btn btn-danger btn-sm m-1\"\n                            (click)=\"eliminar(tienda)\">Eliminar</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}